import{c as ce,N as q,h as g,S as se,a6 as he,I as pe,K as B,O as ae,a7 as we,W as ye,Z as ze,Y as be,B as ge,a8 as Me}from"./index.67c35e3b.js";const Ae=ce({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:i}){const u=q(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>g("div",{class:u.value},se(i.default))}}),Ve=ce({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:i}){const u=q(()=>parseInt(e.lines,10)),f=q(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(u.value===1?" ellipsis":"")),w=q(()=>e.lines!==void 0&&u.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":u.value}:null);return()=>g("div",{style:w.value,class:f.value},se(i.default))}});let Q=!1;{const e=document.createElement("div"),i=document.createElement("div");e.setAttribute("dir","rtl"),e.style.width="1px",e.style.height="1px",e.style.overflow="auto",i.style.width="1000px",i.style.height="1px",document.body.appendChild(e),e.appendChild(i),e.scrollLeft=-1e3,Q=e.scrollLeft>=0,e.remove()}const M=1e3,Ee=["start","center","end","start-force","center-force","end-force"],ue=Array.prototype.filter,_e=window.getComputedStyle(document.body).overflowAnchor===void 0?he:function(e,i){e!==null&&(cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;const u=e.children||[];ue.call(u,w=>w.dataset&&w.dataset.qVsAnchor!==void 0).forEach(w=>{delete w.dataset.qVsAnchor});const f=u[i];f&&f.dataset&&(f.dataset.qVsAnchor="")}))};function O(e,i){return e+i}function J(e,i,u,f,w,s,x,E){const y=e===window?document.scrollingElement||document.documentElement:e,b=w===!0?"offsetWidth":"offsetHeight",o={scrollStart:0,scrollViewSize:-x-E,scrollMaxSize:0,offsetStart:-x,offsetEnd:-E};if(w===!0?(e===window?(o.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,o.scrollViewSize+=document.documentElement.clientWidth):(o.scrollStart=y.scrollLeft,o.scrollViewSize+=y.clientWidth),o.scrollMaxSize=y.scrollWidth,s===!0&&(o.scrollStart=(Q===!0?o.scrollMaxSize-o.scrollViewSize:0)-o.scrollStart)):(e===window?(o.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,o.scrollViewSize+=document.documentElement.clientHeight):(o.scrollStart=y.scrollTop,o.scrollViewSize+=y.clientHeight),o.scrollMaxSize=y.scrollHeight),u!==null)for(let S=u.previousElementSibling;S!==null;S=S.previousElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(o.offsetStart+=S[b]);if(f!==null)for(let S=f.nextElementSibling;S!==null;S=S.nextElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(o.offsetEnd+=S[b]);if(i!==e){const S=y.getBoundingClientRect(),h=i.getBoundingClientRect();w===!0?(o.offsetStart+=h.left-S.left,o.offsetEnd-=h.width):(o.offsetStart+=h.top-S.top,o.offsetEnd-=h.height),e!==window&&(o.offsetStart+=o.scrollStart),o.offsetEnd+=o.scrollMaxSize-o.offsetStart}return o}function ne(e,i,u,f){i==="end"&&(i=(e===window?document.body:e)[u===!0?"scrollWidth":"scrollHeight"]),e===window?u===!0?(f===!0&&(i=(Q===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-i),window.scrollTo(i,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,i):u===!0?(f===!0&&(i=(Q===!0?e.scrollWidth-e.offsetWidth:0)-i),e.scrollLeft=i):e.scrollTop=i}function C(e,i,u,f){if(u>=f)return 0;const w=i.length,s=Math.floor(u/M),x=Math.floor((f-1)/M)+1;let E=e.slice(s,x).reduce(O,0);return u%M!==0&&(E-=i.slice(s*M,u).reduce(O,0)),f%M!==0&&f!==w&&(E-=i.slice(f,x*M).reduce(O,0)),E}const qe={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Be={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...qe};function Re({virtualScrollLength:e,getVirtualScrollTarget:i,getVirtualScrollEl:u,virtualScrollItemSizeComputed:f}){const w=pe(),{props:s,emit:x,proxy:E}=w,{$q:y}=E;let b,o,S,h=[],d;const A=B(0),R=B(0),T=B({}),F=B(null),W=B(null),k=B(null),m=B({from:0,to:0}),D=q(()=>s.tableColspan!==void 0?s.tableColspan:100);f===void 0&&(f=q(()=>s.virtualScrollItemSize));const I=q(()=>f.value+";"+s.virtualScrollHorizontal),fe=q(()=>I.value+";"+s.virtualScrollSliceRatioBefore+";"+s.virtualScrollSliceRatioAfter);ae(fe,()=>{H()}),ae(I,Y);function Y(){K(o,!0)}function ee(t){K(t===void 0?o:t)}function L(t,l){const r=i();if(r==null||r.nodeType===8)return;const v=J(r,u(),F.value,W.value,s.virtualScrollHorizontal,y.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd);S!==v.scrollViewSize&&H(v.scrollViewSize),N(r,v,Math.min(e.value-1,Math.max(0,parseInt(t,10)||0)),0,Ee.indexOf(l)>-1?l:o>-1&&t>o?"end":"start")}function de(){const t=i();if(t==null||t.nodeType===8)return;const l=J(t,u(),F.value,W.value,s.virtualScrollHorizontal,y.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd),r=e.value-1,v=l.scrollMaxSize-l.offsetStart-l.offsetEnd-R.value;if(b===l.scrollStart)return;if(l.scrollMaxSize<=0){N(t,l,0,0);return}S!==l.scrollViewSize&&H(l.scrollViewSize),X(m.value.from);const p=Math.floor(l.scrollMaxSize-Math.max(l.scrollViewSize,l.offsetEnd)-Math.min(d[r],l.scrollViewSize/2));if(p>0&&Math.ceil(l.scrollStart)>=p){N(t,l,r,l.scrollMaxSize-l.offsetEnd-h.reduce(O,0));return}let c=0,n=l.scrollStart-l.offsetStart,z=n;if(n<=v&&n+l.scrollViewSize>=A.value)n-=A.value,c=m.value.from,z=n;else for(let a=0;n>=h[a]&&c<r;a++)n-=h[a],c+=M;for(;n>0&&c<r;)n-=d[c],n>-l.scrollViewSize?(c++,z=n):z=d[c]+n;N(t,l,c,z)}function N(t,l,r,v,p){const c=typeof p=="string"&&p.indexOf("-force")>-1,n=c===!0?p.replace("-force",""):p,z=n!==void 0?n:"start";let a=Math.max(0,r-T.value[z]),_=a+T.value.total;_>e.value&&(_=e.value,a=Math.max(0,_-T.value.total)),b=l.scrollStart;const j=a!==m.value.from||_!==m.value.to;if(j===!1&&n===void 0){le(r);return}const{activeElement:ie}=document,V=k.value;j===!0&&V!==null&&V!==ie&&V.contains(ie)===!0&&(V.addEventListener("focusout",te),setTimeout(()=>{V!==null&&V.removeEventListener("focusout",te)})),_e(V,r-a);const Se=n!==void 0?d.slice(a,r).reduce(O,0):0;if(j===!0){const P=_>=m.value.from&&a<=m.value.to?m.value.to:_;m.value={from:a,to:P},A.value=C(h,d,0,a),R.value=C(h,d,_,e.value),requestAnimationFrame(()=>{m.value.to!==_&&b===l.scrollStart&&(m.value={from:m.value.from,to:_},R.value=C(h,d,_,e.value))})}requestAnimationFrame(()=>{if(b!==l.scrollStart)return;j===!0&&X(a);const P=d.slice(a,r).reduce(O,0),$=P+l.offsetStart+A.value,re=$+d[r];let Z=$+v;if(n!==void 0){const me=P-Se,G=l.scrollStart+me;Z=c!==!0&&G<$&&re<G+l.scrollViewSize?G:n==="end"?re-l.scrollViewSize:$-(n==="start"?0:Math.round((l.scrollViewSize-d[r])/2))}b=Z,ne(t,Z,s.virtualScrollHorizontal,y.lang.rtl),le(r)})}function X(t){const l=k.value;if(l){const r=ue.call(l.children,a=>a.classList&&a.classList.contains("q-virtual-scroll--skip")===!1),v=r.length,p=s.virtualScrollHorizontal===!0?a=>a.getBoundingClientRect().width:a=>a.offsetHeight;let c=t,n,z;for(let a=0;a<v;){for(n=p(r[a]),a++;a<v&&r[a].classList.contains("q-virtual-scroll--with-prev")===!0;)n+=p(r[a]),a++;z=n-d[c],z!==0&&(d[c]+=z,h[Math.floor(c/M)]+=z),c++}}}function te(){k.value!==null&&k.value!==void 0&&k.value.focus()}function K(t,l){const r=1*f.value;(l===!0||Array.isArray(d)===!1)&&(d=[]);const v=d.length;d.length=e.value;for(let c=e.value-1;c>=v;c--)d[c]=r;const p=Math.floor((e.value-1)/M);h=[];for(let c=0;c<=p;c++){let n=0;const z=Math.min((c+1)*M,e.value);for(let a=c*M;a<z;a++)n+=d[a];h.push(n)}o=-1,b=void 0,A.value=C(h,d,0,m.value.from),R.value=C(h,d,m.value.to,e.value),t>=0?(X(m.value.from),Me(()=>{L(t)})):U()}function H(t){if(t===void 0&&typeof window<"u"){const n=i();n!=null&&n.nodeType!==8&&(t=J(n,u(),F.value,W.value,s.virtualScrollHorizontal,y.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd).scrollViewSize)}S=t;const l=parseFloat(s.virtualScrollSliceRatioBefore)||0,r=parseFloat(s.virtualScrollSliceRatioAfter)||0,v=1+l+r,p=t===void 0||t<=0?1:Math.ceil(t/f.value),c=Math.max(1,p,Math.ceil((s.virtualScrollSliceSize>0?s.virtualScrollSliceSize:10)/v));T.value={total:Math.ceil(c*v),start:Math.ceil(c*l),center:Math.ceil(c*(.5+l)),end:Math.ceil(c*(1+l)),view:p}}function ve(t,l){const r=s.virtualScrollHorizontal===!0?"width":"height",v={["--q-virtual-scroll-item-"+r]:f.value+"px"};return[t==="tbody"?g(t,{class:"q-virtual-scroll__padding",key:"before",ref:F},[g("tr",[g("td",{style:{[r]:`${A.value}px`,...v},colspan:D.value})])]):g(t,{class:"q-virtual-scroll__padding",key:"before",ref:F,style:{[r]:`${A.value}px`,...v}}),g(t,{class:"q-virtual-scroll__content",key:"content",ref:k,tabindex:-1},l.flat()),t==="tbody"?g(t,{class:"q-virtual-scroll__padding",key:"after",ref:W},[g("tr",[g("td",{style:{[r]:`${R.value}px`,...v},colspan:D.value})])]):g(t,{class:"q-virtual-scroll__padding",key:"after",ref:W,style:{[r]:`${R.value}px`,...v}})]}function le(t){o!==t&&(s.onVirtualScroll!==void 0&&x("virtual-scroll",{index:t,from:m.value.from,to:m.value.to-1,direction:t<o?"decrease":"increase",ref:E}),o=t)}H();const U=we(de,y.platform.is.ios===!0?120:35);ye(()=>{H()});let oe=!1;return ze(()=>{oe=!0}),be(()=>{if(oe!==!0)return;const t=i();b!==void 0&&t!==void 0&&t!==null&&t.nodeType!==8?ne(t,b,s.virtualScrollHorizontal,y.lang.rtl):L(o)}),ge(()=>{U.cancel()}),Object.assign(E,{scrollTo:L,reset:Y,refresh:ee}),{virtualScrollSliceRange:m,virtualScrollSliceSizeComputed:T,setVirtualScrollSize:H,onVirtualScrollEvt:U,localResetVirtualScroll:K,padVirtualScroll:ve,scrollTo:L,reset:Y,refresh:ee}}export{Ve as Q,Ae as a,Re as b,Be as u};
